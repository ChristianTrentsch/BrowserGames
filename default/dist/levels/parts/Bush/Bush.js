"use strict";import{GameObject as p}from"../../../GameObject.js";import{Sprite as i}from"../../../Sprite.js";import{Vector2 as e}from"../../../Vector2.js";import{resources as r}from"../../../Resource.js";import{getNextText as a}from"../../../helpers/levelPartsText.js";import{BUSH as d,Item as u}from"../../../objects/Item/Item.js";import{events as f,RES_DESTROY as b}from"../../../Events.js";import{getResourceFrame as o}from"../../../helpers/generateResources.js";export class Bush extends p{constructor(t,s,h=2,n="outdoor"){super(new e(t,s));this.xp=1;this.type="bush";this.isSolid=!0,this.healthPoints=h,this.design=n;const m=new i({resource:r.images.shadow,frameSize:new e(32,32),position:new e(-8,-16)});this.addChild(m),this.bushSprite=new i({resource:r.images.bush,frameSize:new e(16,16),position:new e(0,0),hFrames:2,vFrames:2,frame:o(this.type,this.design)}),this.addChild(this.bushSprite)}ready(){}step(t){let s=o(this.type,this.design);this.healthPoints<=1&&(this.removeChild(this.bushSprite),s+=1,this.bushSprite=new i({resource:r.images.bush,frameSize:new e(16,16),position:new e(0,0),hFrames:2,vFrames:2,frame:s}),this.addChild(this.bushSprite)),this.healthPoints<=0&&(f.emit(b,this),this.destroy(!0))}destroy(t=!1){t&&this.spawnItem(),super.destroy()}spawnItem(){const t=new u(this.position.x,this.position.y,d,"./sounds/items/pick_up_item.mp3",1);this.parent&&this.parent.addChild(t)}getContent(){return{portraitFrame:0,string:a("Bush")}}}
