"use strict";import{GameObject as h}from"../../../GameObject.js";import{Sprite as r}from"../../../Sprite.js";import{Vector2 as e}from"../../../Vector2.js";import{resources as o}from"../../../Resource.js";import{getNextText as a}from"../../../helpers/levelPartsText.js";import{Item as p,STONE as d}from"../../../objects/Item/Item.js";import{events as u,RES_DESTROY as f}from"../../../Events.js";import{getResourceFrame as n}from"../../../helpers/generateResources.js";export class Stone extends h{constructor(t,i,s=4,m="outdoor"){super(new e(t,i));this.xp=3;this.type="stone";this.isSolid=!0,this.healthPoints=s,this.design=m,this.stoneSprite=new r({resource:o.images.stone,frameSize:new e(16,16),position:new e(0,0),hFrames:4,vFrames:2,frame:n(this.type,this.design)}),this.addChild(this.stoneSprite)}ready(){}step(t){const s=n(this.type,this.design)+(4-this.healthPoints);this.healthPoints>=1&&this.healthPoints<=3&&(this.removeChild(this.stoneSprite),this.stoneSprite=new r({resource:o.images.stone,frameSize:new e(16,16),position:new e(0,0),hFrames:4,vFrames:2,frame:s}),this.addChild(this.stoneSprite)),this.healthPoints<=0&&(u.emit(f,this),this.destroy(!0))}destroy(t=!1){t&&this.spawnItem(),super.destroy()}spawnItem(){const t=new p(this.position.x,this.position.y,d,"./sounds/items/pick_up_item.mp3",1);this.parent&&this.parent.addChild(t)}getContent(){return{portraitFrame:0,string:a("Stone")}}}
