"use strict";import{gridCells as o,TILE_SIZE as t}from"../helpers/grid.js";import{resources as r}from"../Resource.js";import{Vector2 as e}from"../Vector2.js";import{Sprite as i}from"../Sprite.js";import{Level as f}from"../objects/Level/Level.js";import{Exit as c}from"../objects/Exit/Exit.js";import{Hero as u}from"../objects/Hero/Hero.js";import{Rod as g}from"../objects/Rod/Rod.js";import{events as n,HERO_EXITS as v,CHANGE_LEVEL as S}from"../Events.js";import{CaveLevel1 as L}from"./CaveLevel1.js";import{SaveGame as s}from"../SaveGame.js";export class OutdoorLevel1 extends f{constructor({position:l,heroPosition:a}){super(l);this.defaultHeroPosition=new e(o(11),o(3));this.levelId="OutdoorLevel1";console.log("OutdoorLevel1 LOADED",this),this.background=new i({resource:r.images.sky,frameSize:new e(320,180),position:new e(0,0)});const d=new i({resource:r.images.ground,frameSize:new e(320,180),position:new e(0,0)});this.addChild(d);const h=new c(o(10),o(3));this.addChild(h),this.heroStartPosition=s.loadHero(this.levelId,a??this.defaultHeroPosition);const m=new u(this.heroStartPosition.x,this.heroStartPosition.y);if(this.addChild(m),!s.isInInventory("rodPurple")){const p=new g(o(7),o(6),"rodPurple");this.addChild(p)}const w={right:this.generateWall(new e(256,32),new e(256,96),t,"right"),left:this.generateWall(new e(32,32),new e(32,96),t,"left"),top:this.generateWall(new e(48,16),new e(240,16),t,"top"),bottom:this.generateWall(new e(48,112),new e(240,112),t,"bottom"),tree:["64,48","208,64","224,32"],stone:["192,96","208,96","224,96"],squares:["64,64","64,80","80,64","80,80","128,48","144,48"],water:["112,80","128,80","144,80","160,80"],house:["224,64"],nothing:["240,32","96,32","80,32","64,32","48,32"]};this.walls=new Set(Object.values(w).flat())}ready(){n.on(v,this,()=>{n.emit(S,new L({position:new e(o(0),o(0)),heroPosition:new e(o(6),o(1))}))})}}
