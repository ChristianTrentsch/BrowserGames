"use strict";import{gridCells as o,TILE_SIZE as i}from"../helpers/grid.js";import{resources as n}from"../Resource.js";import{Vector2 as e}from"../Vector2.js";import{Sprite as s}from"../Sprite.js";import{Level as S}from"../objects/Level/Level.js";import{Exit as g}from"../objects/Exit/Exit.js";import{Hero as v}from"../objects/Hero/Hero.js";import{Item as L}from"../objects/Item/Item.js";import{events as h,HERO_EXITS as P,CHANGE_LEVEL as I}from"../Events.js";import{CaveLevel1 as E}from"./CaveLevel1.js";import{SaveGame as l}from"../SaveGame.js";import{Tree as r}from"./parts/Tree/Tree.js";import{Stone as d}from"./parts/Stone/Stone.js";import{Square as t}from"./parts/Square/Square.js";import{Water as a}from"./parts/Water/Water.js";import{Bush as H}from"./parts/Bush/Bush.js";import{House as O}from"./parts/House/House.js";export class OutdoorLevel1 extends S{constructor({position:m,heroPosition:w}){super(m,"./sounds/levels/OutdoorLevel1.mp3",.4);this.defaultHeroPosition=new e(o(8),o(4));this.levelId="OutdoorLevel1";this.initBackgroundSound(),console.log("OutdoorLevel1 LOADED",this),this.background=new s({resource:n.images.outdoorSky,frameSize:new e(320,180),position:new e(0,0)});const p=new s({resource:n.images.outdoorGround,frameSize:new e(320,180),position:new e(0,0)});this.addChild(p);const u=new g(o(10),o(3));this.addChild(u),this.addChild(new H(80,48)),this.addChild(new r(64,48)),this.addChild(new r(208,64)),this.addChild(new r(224,32)),this.addChild(new d(192,96)),this.addChild(new d(208,96)),this.addChild(new d(224,96)),this.addChild(new t(64,64)),this.addChild(new t(64,80)),this.addChild(new t(80,80)),this.addChild(new t(96,64)),this.addChild(new t(96,80)),this.addChild(new t(128,48)),this.addChild(new t(144,48)),this.addChild(new a(128,80)),this.addChild(new a(144,80)),this.addChild(new O(224,64)),this.heroStartPosition=l.loadHero(this.levelId,w??this.defaultHeroPosition);const f=new v(this.heroStartPosition.x,this.heroStartPosition.y);if(this.addChild(f),!l.isInInventory("rodPurple")){const c=new L(o(5),o(4),"rodPurple");this.addChild(c)}const C={right:this.generateWall(new e(256,32),new e(256,96),i,"right"),left:this.generateWall(new e(32,32),new e(32,96),i,"left"),top:this.generateWall(new e(48,16),new e(240,16),i,"top"),bottom:this.generateWall(new e(48,112),new e(240,112),i,"bottom")};this.walls=new Set(Object.values(C).flat())}ready(){h.on(P,this,()=>{this.stopBackgroundSound(),h.emit(I,new E({position:new e(o(0),o(0)),heroPosition:new e(o(6),o(1))}))})}}
