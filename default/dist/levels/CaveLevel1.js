"use strict";import{gridCells as t,TILE_SIZE as o}from"../helpers/grid.js";import{resources as i}from"../Resource.js";import{Vector2 as e}from"../Vector2.js";import{Sprite as r}from"../Sprite.js";import{Level as v}from"../objects/Level/Level.js";import{Exit as S}from"../objects/Exit/Exit.js";import{Hero as g}from"../objects/Hero/Hero.js";import{events as n,HERO_EXITS as C,CHANGE_LEVEL as I}from"../Events.js";import{OutdoorLevel1 as L}from"./OutdoorLevel1.js";import{Npc as s}from"../objects/Npc/Npc.js";import{Item as E}from"../objects/Item/Item.js";import{SaveGame as a}from"../SaveGame.js";export class CaveLevel1 extends v{constructor({position:l,heroPosition:d}){super(l,"./sounds/levels/CaveLevel1.mp3",.3);this.defaultHeroPosition=new e(t(6),t(1));this.levelId="CaveLevel1";this.initBackgroundSound(),console.log("CaveLevel1 LOADED",this),this.background=new r({resource:i.images.cave,frameSize:new e(320,180),position:new e(0,0)});const h=new r({resource:i.images.caveGround,frameSize:new e(320,180),position:new e(0,0)});this.addChild(h);const m=new S(t(5),t(1));this.addChild(m),this.heroStartPosition=a.loadHero(this.levelId,d??this.defaultHeroPosition);const c=new g(this.heroStartPosition.x,this.heroStartPosition.y);if(this.addChild(c),!a.isInInventory("rodRed")){const f=new E(t(10),t(6),"rodRed","./sounds/items/item_01.mp3");this.addChild(f)}const p=new s(t(5),t(5),"Ich bin der Uwe und ich bin auch dabei!");this.addChild(p);const w=new s(t(10),t(4),"Ich will hier raauuuusss!");this.addChild(w);const u={right:this.generateWall(new e(288,16),new e(288,112),o,"right"),left:this.generateWall(new e(16,16),new e(16,112),o,"left"),top:this.generateWall(new e(32,0),new e(272,0),o,"top"),bottom:this.generateWall(new e(32,128),new e(272,128),o,"bottom"),stone:["144,16","192,32","208,32","208,48","256,80","32,64"],littleStone:["48,64","48,80"],squares:["48,13","64,16","80,48","96,48","128,48","112,64","96,64","192,80","208,80","224,96"],water:["240,32","256,32","208,96","192,96","176,96","128,96","112,96","96,96"]};this.walls=new Set(Object.values(u).flat())}ready(){n.on(C,this,()=>{this.stopBackgroundSound(),n.emit(I,new L({position:new e(t(0),t(0)),heroPosition:new e(t(11),t(3))}))})}}
