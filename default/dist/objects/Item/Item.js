"use strict";import{GameObject as d}from"../../GameObject.js";import{Sprite as h}from"../../Sprite.js";import{Vector2 as m}from"../../Vector2.js";import{resources as o}from"../../Resource.js";import{events as n,HERO_POSTION as p,HERO_PICKS_UP_ITEM as E}from"../../Events.js";export class Item extends d{constructor(e,i,t,r="./sounds/items/pick_up_item_01.mp3",s=.7){super(new m(e,i)),this.itemKey=t,this.itemSound=new Audio(r),this.itemSound.volume=s;const u=o.getCollectibleItemFrame(this.itemKey);this.addChild(new h({resource:o.images.collectible,position:new m(0,-5),hFrames:20,frame:u}))}ready(){n.on(p,this,e=>{const i=Math.round(e.x),t=Math.round(e.y);i===this.position.x&&t===this.position.y&&this.onCollideWithHero()})}onCollideWithHero(){n.unsubscribe(this),this.itemSound.pause(),this.itemSound.currentTime=0,this.destroy(),n.emit(E,{name:this.itemKey,image:o.images.collectible,position:this.position,itemSound:this.itemSound})}}
