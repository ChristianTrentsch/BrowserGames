"use strict";import{GameObject as m}from"./../../GameObject.js";import{Vector2 as r}from"./../../Vector2.js";import{LEFT as w,RIGHT as d,UP as f,DOWN as p}from"./../../Input.js";import{Sprite as l}from"../../Sprite.js";import{resources as k}from"../../Resource.js";import{Animations as h}from"../../Animations.js";import{FrameIndexPattern as t}from"../../FrameIndexPattern.js";import{WALK_LEFT as u,WALK_DOWN as A,WALK_UP as D,WALK_RIGHT as y,STAND_LEFT as W,STAND_DOWN as T,STAND_UP as _,STAND_RIGHT as b,PICK_UP_DOWN as L,ATTACK_WALK_DOWN as S,ATTACK_WALK_LEFT as K,ATTACK_WALK_RIGHT as U,ATTACK_WALK_UP as g}from"../Hero/heroAnimations.js";export class SwordSlash extends m{constructor(e,i){super(new r(0,0));this.lifetime=480;if(this.facingDirection=i,this.drawLayer="HUD",this.body=new l({resource:k.images.sword,position:new r(-8,-8),frameSize:new r(32,32),hFrames:6,vFrames:4,frame:1,animations:new h({walkLeft:new t(u),walkDown:new t(A),walkUp:new t(D),walkRight:new t(y),standLeft:new t(W),standDown:new t(T),standUp:new t(_),standRight:new t(b),pickUpDown:new t(L),attackWalkDown:new t(S),attackWalkRight:new t(U),attackWalkUp:new t(g),attackWalkLeft:new t(K)})}),this.addChild(this.body),this.playSoundSlice(.2,.6),this.body.animations){switch(this.facingDirection){case w:this.body.animations.play("attackWalkLeft");break;case d:this.body.animations.play("attackWalkRight");break;case f:this.body.animations.play("attackWalkUp");break;case p:this.body.animations.play("attackWalkDown");break}return}}step(e){this.lifetime-=e,this.lifetime<=0&&this.destroy()}destroy(){super.destroy()}async playSoundSlice(e,i){const s=await(await fetch("./sounds/items/sword_attack01.mp3")).arrayBuffer(),a=new AudioContext,c=await a.decodeAudioData(s),o=a.createBufferSource();o.buffer=c;const n=a.createGain();n.gain.value=.1,o.connect(n),n.connect(a.destination),o.start(0,e,i-e)}}
