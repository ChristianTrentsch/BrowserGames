"use strict";import{Vector2 as m}from"./Vector2.js";import{GameObject as h}from"./GameObject.js";export class Sprite extends h{constructor({resource:e,position:r,frameSize:i,hFrames:a,vFrames:t,frame:s,scale:n,animations:o}){super(r),this.resource=e,this.position=r??new m(0,0),this.frameSize=i??new m(16,16),this.hFrames=a??1,this.vFrames=t??1,this.frame=s??0,this.frameMap=new Map,this.scale=n??1,this.animations=o??null,this.buildFrameMap()}buildFrameMap(){let e=0;for(let r=0;r<this.vFrames;r++)for(let i=0;i<this.hFrames;i++)this.frameMap.set(e,new m(this.frameSize.x*i,this.frameSize.y*r)),e++}step(e){this.animations&&(this.animations.step(e),this.frame=this.animations.frame)}drawImage(e,r,i){if(!this.resource.isLoaded)return;let a=0,t=0;const s=this.frameMap.get(this.frame);s&&(a=s.x,t=s.y),e.drawImage(this.resource.image,a,t,this.frameSize.x,this.frameSize.y,r,i,this.frameSize.x*this.scale,this.frameSize.y*this.scale)}}
