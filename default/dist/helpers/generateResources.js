"use strict";import{gridCells as a}from"../helpers/grid.js";function S(r){return function(){let e=r+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function B(r,e,n){return n?n.some(u=>r>=u.x1&&r<=u.x2&&e>=u.y1&&e<=u.y2):!1}export function generateDefaultResources(r){const{seed:e=42,width:n,height:u,tileSize:t=16,density:i={Tree:.015,Bush:.007,Stone:.002},pathZones:y=[],border:m=32}=r,l=S(e+r.levelId.length),x=Math.floor(n/t),k=Math.floor(u/t),h=[];for(let o=0;o<k;o++)for(let s=0;s<x;s++){const f=s*t,p=o*t;if(B(s,o,y)||f<m||f>n-m-t||p<m||p>u-m-t)continue;const b=l();if(b<i.Tree){const c=d(l,3,4,.1);h.push({type:"tree",x:a(s),y:a(o),hp:c})}else if(b<i.Tree+i.Bush){const c=d(l,2,2,.1);h.push({type:"bush",x:a(s),y:a(o),hp:c})}else if(b<i.Tree+i.Bush+i.Stone){const c=d(l,3,4,.1);h.push({type:"stone",x:a(s),y:a(o),hp:c})}}return h}export function generateDeko(r){const{seed:e=42,width:n,height:u,tileSize:t=16,density:i={animBush:.002,animBushSmall:.002},pathZones:y=[],border:m=32}=r,l=S(e+r.levelId.length),x=Math.floor(n/t),k=Math.floor(u/t),h=[];for(let o=3;o<k;o++)for(let s=3;s<x;s++){const f=s*t,p=o*t;if(B(s,o,y)||f<m||f>n-m-t||p<m||p>u-m-t)continue;const b=l();if(b<i.animBushSmall)h.push({type:"animBushSmall",x:a(s),y:a(o)});else if(b<i.animBushSmall+i.animBush){const c=d(l,2,2,.1);h.push({type:"animBush",x:a(s),y:a(o)})}}return h}function d(r,e,n,u=.1){let t=Math.floor(r()*(n-e+1))+e;return r()<u&&(r()<.5?t=Math.max(1,t-1):t=t+1),t}export function getResourceFrame(r,e="outdoor"){let n=0;switch(r){case"bush":switch(e){case"desert":n=2;break;default:n=0;break}break;case"tree":case"stone":switch(e){case"desert":n=4;break;default:n=0;break}break;case"square":switch(e){case"desert":n=1;break;default:n=0;break}break}return n}
