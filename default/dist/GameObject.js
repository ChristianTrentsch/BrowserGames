"use strict";import{Vector2 as a}from"./Vector2.js";import{events as h}from"./Events.js";export const HUD="HUD",FLOOR="FLOOR";export class GameObject{constructor(e){this.position=e??new a(0,0),this.children=[],this.parent=null,this.hasReadyBeenCalled=!1,this.isSolid=!1,this.drawLayer=null}stepEntry(e,r){this.children&&this.children.forEach(t=>t.stepEntry(e,r)),this.hasReadyBeenCalled||(this.hasReadyBeenCalled=!0,this.ready()),this.step(e,r)}ready(){}step(e,r){}draw(e,r,t){const i=r+this.position.x,n=t+this.position.y;this.drawImage(e,i,n),this.getDrawChildrenOrdered().forEach(s=>s.draw(e,i,n))}getDrawChildrenOrdered(){return[...this.children].sort((e,r)=>r.drawLayer===FLOOR||e.position.y>r.position.y?1:-1)}drawImage(e,r,t){}destroy(){this.children.forEach(e=>{e.destroy()}),this.parent&&this.parent.removeChild(this)}addChild(e){e.parent=this,this.children.push(e)}removeChild(e){h.unsubscribe(e),this.children=this.children.filter(r=>e!==r)}}
